"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[524],{2524:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(5155),n=s(2115);function c(){let[e,t]=(0,n.useState)(0),[s,c]=(0,n.useState)(0),[r,l]=(0,n.useState)(0),[i,o]=(0,n.useState)(!1),[h,u]=(0,n.useState)(0),[d,m]=(0,n.useState)(!1),[M,x]=(0,n.useState)(!1),f=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=null;return i&&!d&&!M&&(s>0||r>0)?e=setInterval(()=>{r>0?l(r-1):s>0&&(c(s-1),l(59))},1e3):0!==s||0!==r||!i||d||M||(o(!1),u(0),alert("番茄钟时间到！")),()=>clearInterval(e)},[i,s,r,d,M]),(0,n.useEffect)(()=>{i&&e>0&&!d&&!M&&u((60*s+r)/(60*e)*e*6)},[s,r,e,i,d,M]);let v=e=>Math.round(e/6),I=e=>{d&&y(e)},p=()=>{if(d&&h>0){let e=v(h);t(e),c(e),l(0),o(!0),x(!1)}else d&&0===h&&(o(!1),x(!1),t(0),c(0),l(0));m(!1)},y=e=>{let t=f.current.getBoundingClientRect(),s=t.left+t.width/2,a=t.top+t.height/2;u((Math.atan2(e.clientY-a,e.clientX-s)*(180/Math.PI)+90+360)%360)},P=e=>{d&&(e.preventDefault(),j(e.touches[0]))},g=()=>{if(d&&h>0){let e=v(h);t(e),c(e),l(0),o(!0),x(!1)}else d&&0===h&&(o(!1),x(!1),t(0),c(0),l(0));m(!1)},j=e=>{let t=f.current.getBoundingClientRect(),s=t.left+t.width/2,a=t.top+t.height/2;u((Math.atan2(e.clientY-a,e.clientX-s)*(180/Math.PI)+90+360)%360)};(0,n.useEffect)(()=>(document.addEventListener("mousemove",I),document.addEventListener("mouseup",p),document.addEventListener("touchmove",P),document.addEventListener("touchend",g),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",g)}),[d,h,i]);let k=d||M?v(h):s,b=d||M?0:r;return(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("svg",{ref:f,width:"280",height:"280",className:"cursor-pointer",onMouseDown:e=>{m(!0),i&&x(!0),y(e)},onTouchStart:e=>{m(!0),i&&x(!0),j(e.touches[0])},children:[(0,a.jsx)("circle",{cx:"140",cy:"140",r:"130",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),[...Array(12)].map((e,t)=>{let s=30*t,n=140+120*Math.cos((s-90)*Math.PI/180),c=140+120*Math.sin((s-90)*Math.PI/180),r=140+110*Math.cos((s-90)*Math.PI/180),l=140+110*Math.sin((s-90)*Math.PI/180);return(0,a.jsx)("line",{x1:n,y1:c,x2:r,y2:l,stroke:"#6b7280",strokeWidth:"2"},t)}),[...Array(60)].map((e,t)=>{if(t%5!=0){let e=6*t,s=140+120*Math.cos((e-90)*Math.PI/180),n=140+120*Math.sin((e-90)*Math.PI/180),c=140+115*Math.cos((e-90)*Math.PI/180),r=140+115*Math.sin((e-90)*Math.PI/180);return(0,a.jsx)("line",{x1:s,y1:n,x2:c,y2:r,stroke:"#d1d5db",strokeWidth:"1"},"small-".concat(t))}return null}),[0,5,10,15,20,25,30,35,40,45,50,55].map(e=>{let t=6*e,s=140+100*Math.cos((t-90)*Math.PI/180),n=140+100*Math.sin((t-90)*Math.PI/180);return(0,a.jsx)("text",{x:s,y:n,textAnchor:"middle",dominantBaseline:"central",className:"fill-gray-600 text-sm font-semibold select-none",children:e},e)}),h>0&&(0,a.jsx)("path",{d:"M 140 140 L 140 10 A 130 130 0 ".concat(h>180?1:0," 1 ").concat(140+130*Math.sin(h*Math.PI/180)," ").concat(140-130*Math.cos(h*Math.PI/180)," Z"),fill:!i||d||M?"#ef4444":"#10b981",opacity:"0.7"}),(0,a.jsx)("line",{x1:"140",y1:"140",x2:140+120*Math.sin(h*Math.PI/180),y2:140-120*Math.cos(h*Math.PI/180),stroke:"#374151",strokeWidth:"4",strokeLinecap:"round"}),(0,a.jsx)("circle",{cx:140+120*Math.sin(h*Math.PI/180),cy:140-120*Math.cos(h*Math.PI/180),r:"12",fill:"#374151",stroke:"white",strokeWidth:"3",className:"cursor-grab active:cursor-grabbing"}),(0,a.jsx)("circle",{cx:"140",cy:"10",r:"4",fill:"#10b981"}),(0,a.jsx)("circle",{cx:"140",cy:"140",r:"6",fill:"#374151"})]})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-4xl font-bold text-gray-800 mb-4 select-none",children:[String(k).padStart(2,"0"),":",String(b).padStart(2,"0")]}),(0,a.jsx)("div",{className:"text-sm text-gray-500 select-none",children:d||M?"拖拽重新设定时间，松手开始倒计时":i?"倒计时进行中...（可拖拽指针重新设定）":"拖拽旋钮设定番茄钟时间"})]})]})}}}]);