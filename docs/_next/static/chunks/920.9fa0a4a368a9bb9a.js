"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{9920:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var s=n(5880),a=n(6292);function r(){let[e,t]=(0,a.useState)(0),[n,r]=(0,a.useState)(0),[c,i]=(0,a.useState)(0),[l,o]=(0,a.useState)(!1),[h,d]=(0,a.useState)(0),[u,x]=(0,a.useState)(!1),[m,M]=(0,a.useState)(!1),f=(0,a.useRef)(null),v=()=>{{let e=window.innerWidth,t=window.innerHeight,n=Math.min(e<480?160:e<640?200:e<768?240:e<1024?280:e<1280?320:360,Math.min(.8*t-200,.5*t)),s=n/2;return{size:n,center:s,outerRadius:s-10,innerRadius:s-20,strokeWidth:n<200?1.5:n<300?2:3}}},[p,g]=(0,a.useState)(v());(0,a.useEffect)(()=>{let e=()=>{g(v())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{let e=null;return l&&!u&&!m&&(n>0||c>0)?e=setInterval(()=>{c>0?i(c-1):n>0&&(r(n-1),i(59))},1e3):0!==n||0!==c||!l||u||m||(o(!1),d(0),alert("番茄钟时间到！")),()=>clearInterval(e)},[l,n,c,u,m]),(0,a.useEffect)(()=>{l&&e>0&&!u&&!m&&d((60*n+c)/(60*e)*e*6)},[n,c,e,l,u,m]);let I=e=>Math.round(e/6),P=e=>{u&&k(e)},y=()=>{if(u&&h>0){let e=I(h);t(e),r(e),i(0),o(!0),M(!1)}else u&&0===h&&(o(!1),M(!1),t(0),r(0),i(0));x(!1)},k=e=>{let t=f.current.getBoundingClientRect(),n=t.left+t.width/2,s=t.top+t.height/2;d((Math.atan2(e.clientY-s,e.clientX-n)*(180/Math.PI)+90+360)%360)},w=e=>{u&&(e.preventDefault(),e.stopPropagation(),j(e.touches[0]))},E=()=>{if(u&&h>0){let e=I(h);t(e),r(e),i(0),o(!0),M(!1)}else u&&0===h&&(o(!1),M(!1),t(0),r(0),i(0));x(!1)},j=e=>{let t=f.current.getBoundingClientRect(),n=t.left+t.width/2,s=t.top+t.height/2;d((Math.atan2(e.clientY-s,e.clientX-n)*(180/Math.PI)+90+360)%360)};(0,a.useEffect)(()=>(document.addEventListener("mousemove",P),document.addEventListener("mouseup",y),document.addEventListener("touchmove",w),document.addEventListener("touchend",E),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",E)}),[u,h,l]);let b=u||m?I(h):n,S=u||m?0:c,{size:L,center:N,outerRadius:W,innerRadius:R,strokeWidth:A}=p;return(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-3 sm:space-y-4",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("svg",{ref:f,width:L,height:L,className:"cursor-pointer timer-dial",onMouseDown:e=>{x(!0),l&&M(!0),k(e)},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),x(!0),l&&M(!0),j(e.touches[0])},children:[(0,s.jsx)("circle",{cx:N,cy:N,r:W,fill:"white",stroke:"#e5e7eb",strokeWidth:A}),[...Array(12)].map((e,t)=>{let n=30*t,a=N+(W-10)*Math.cos((n-90)*Math.PI/180),r=N+(W-10)*Math.sin((n-90)*Math.PI/180),c=N+(W-20)*Math.cos((n-90)*Math.PI/180),i=N+(W-20)*Math.sin((n-90)*Math.PI/180);return(0,s.jsx)("line",{x1:a,y1:r,x2:c,y2:i,stroke:"#6b7280",strokeWidth:A},t)}),[...Array(60)].map((e,t)=>{if(t%5!=0){let e=6*t,n=N+(W-10)*Math.cos((e-90)*Math.PI/180),a=N+(W-10)*Math.sin((e-90)*Math.PI/180),r=N+(W-15)*Math.cos((e-90)*Math.PI/180),c=N+(W-15)*Math.sin((e-90)*Math.PI/180);return(0,s.jsx)("line",{x1:n,y1:a,x2:r,y2:c,stroke:"#d1d5db",strokeWidth:"1"},"small-".concat(t))}return null}),[0,5,10,15,20,25,30,35,40,45,50,55].map(e=>{let t=6*e,n=N+(W-40)*Math.cos((t-90)*Math.PI/180),a=N+(W-40)*Math.sin((t-90)*Math.PI/180);return(0,s.jsx)("text",{x:n,y:a,textAnchor:"middle",dominantBaseline:"central",className:"fill-gray-600 text-[10px] sm:text-xs lg:text-sm font-semibold select-none",children:e},e)}),h>0&&(0,s.jsx)("path",{d:"M ".concat(N," ").concat(N," L ").concat(N," ").concat(N-W," A ").concat(W," ").concat(W," 0 ").concat(h>180?1:0," 1 ").concat(N+W*Math.sin(h*Math.PI/180)," ").concat(N-W*Math.cos(h*Math.PI/180)," Z"),fill:!l||u||m?"#ef4444":"#10b981",opacity:"0.7"}),(0,s.jsx)("line",{x1:N,y1:N,x2:N+(W-10)*Math.sin(h*Math.PI/180),y2:N-(W-10)*Math.cos(h*Math.PI/180),stroke:"#374151",strokeWidth:Math.max(2,A+1),strokeLinecap:"round"}),(0,s.jsx)("circle",{cx:N+(W-10)*Math.sin(h*Math.PI/180),cy:N-(W-10)*Math.cos(h*Math.PI/180),r:L<200?"6":L<280?"8":L<320?"10":"12",fill:"#374151",stroke:"white",strokeWidth:"3",className:"cursor-grab active:cursor-grabbing"}),(0,s.jsx)("circle",{cx:N,cy:N-W,r:L<200?"2":L<280?"3":"4",fill:"#10b981"}),(0,s.jsx)("circle",{cx:N,cy:N,r:L<200?"3":L<280?"4":L<320?"5":"6",fill:"#374151"})]})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-lg sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-gray-800 mb-1 sm:mb-2 select-none",children:[String(b).padStart(2,"0"),":",String(S).padStart(2,"0")]}),(0,s.jsx)("div",{className:"text-[10px] sm:text-xs lg:text-sm text-gray-500 select-none px-1",children:u||m?"拖拽重新设定时间，松手开始倒计时":l?"倒计时进行中...（可拖拽指针重新设定）":"拖拽旋钮设定番茄钟时间"})]})]})}}}]);